!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.Rellax=t()}(this,function(){var e=function(t,n){"use strict";var o=Object.create(e.prototype),r=0,i=0,s=[],a=!1,d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},l=window.transformProp||function(){var e=document.createElement("div");if(null==e.style.transform){var t=["Webkit","Moz","ms"];for(var n in t)if(void 0!==e.style[t[n]+"Transform"])return t[n]+"Transform"}return"transform"}(),c=function(e,t,n){return e<=t?t:e>=n?n:e};o.options={speed:-2,center:!1,round:!0,callback:function(){}},n&&Object.keys(n).forEach(function(e){o.options[e]=n[e]}),o.options.speed=c(o.options.speed,-10,10),t||(t=".rellax");var u=document.querySelectorAll(t);if(!(u.length>0))throw new Error("The elements you're trying to select don't exist.");o.elems=u;var f=function(e){var t=e.getAttribute("data-rellax-percentage"),n=e.getAttribute("data-rellax-speed"),r=e.getAttribute("data-rellax-zindex")||0,s=t||o.options.center?window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop:0,a=s+e.getBoundingClientRect().top,d=e.clientHeight||e.offsetHeight||e.scrollHeight,l=t||(s-a+i)/(d+i);o.options.center&&(l=.5);var u=n?c(n,-10,10):o.options.speed;(t||o.options.center)&&(u=c(n||o.options.speed,-5,5));var f=p(l,u),m=e.style.cssText,w="";if(m.indexOf("transform")>=0){var g=m.indexOf("transform"),v=m.slice(g),h=v.indexOf(";");w=h?" "+v.slice(11,h).replace(/\s/g,""):" "+v.slice(11).replace(/\s/g,"")}return{base:f,top:a,height:d,speed:u,style:m,transform:w,zindex:r}},m=function(){var e=r;return r=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,e!=r},p=function(e,t){var n=t*(100*(1-e));return o.options.round?Math.round(n):Math.round(100*n)/100},w=function(){m()&&!1===a&&g(),d(w)},g=function(){for(var e=0;e<o.elems.length;e++){var t=(r-s[e].top+i)/(s[e].height+i),n=p(t,s[e].speed)-s[e].base,a="translate3d(0,"+n+"px,"+s[e].zindex+"px) "+s[e].transform;o.elems[e].style[l]=a}o.options.callback(n)};return o.destroy=function(){for(var e=0;e<o.elems.length;e++)o.elems[e].style.cssText=s[e].style;a=!0},function(){i=window.innerHeight,m();for(var e=0;e<o.elems.length;e++){var t=f(o.elems[e]);s.push(t)}window.addEventListener("resize",function(){g()}),w(),g()}(),o};return e});